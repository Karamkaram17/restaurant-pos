import{a,c as I,e as n}from"./chunk-ORTFMJ5A.js";import{e as m,g as S}from"./chunk-IPYPKU6N.js";import{b as f}from"./chunk-62N6AU7Z.js";import{J as h,aa as p,fa as l,ga as u}from"./chunk-ADCSPYYS.js";var d={version:"1.0.0",appName:"Restaurant POS",appOwner:"KS Solutions",ownerEmail:"ks_solutions_lb@hotmail.com",snackbarDuration:5e3};var c={API_HOST:{test_local:"http://localhost:5000/",test_cloud:"http://localhost:5000/",production:"http://localhost:5000/"},USER:{changePassword:""},CAISSE:{caisse:""},AUTHENTICATION:{login:"api/auth/login",logout:"api/logout",refresh:"api/refresh"}};var T=(()=>{let r=class r{constructor(){this._http=u(f),this.API_HOST=c.API_HOST.test_local}getAsset(t,e){return this._http.get(t+this._getId(e))}get(t,e){return this._http.get(this.API_HOST+t+this._getId(e))}post(t,e,o,i){return this._http.post(this.API_HOST+t+this._getId(i),e,{params:o})}patch(t,e,o,i){return this._http.patch(this.API_HOST+t+this._getId(o),e,{params:i})}delete(t,e,o){return this._http.delete(this.API_HOST+t+this._getId(e),{body:o})}_getId(t){return t?`/${t}`:""}};r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var U=(()=>{let r=class r{constructor(t,e){this._networkService=t,this._router=e,this.isRefreshTokenCalled=!1}login(t,e){this._networkService.post(c.AUTHENTICATION.login,{username:t,password:e}).pipe(h(1)).subscribe({next:o=>{if(o&&o.data){this.isRefreshTokenCalled=!1;let i=JSON.parse(I(o.data));a(n.SS.token,i.accessToken),a(n.SS.username,i.username),a(n.SS.name,i.name),a(n.SS.user,JSON.stringify(i)),this._router.navigateByUrl("/")}}})}refreshToken(){return new Promise((t,e)=>{this._networkService.get(c.AUTHENTICATION.refresh).pipe(h(1)).subscribe({next:o=>{let i=o.accessToken;a(n.SS.token,i),this.isRefreshTokenCalled=!1,t(i)},error:o=>{e(o)}})})}logOut(){sessionStorage.clear(),this._router.navigateByUrl(S.LOGIN.route),this._networkService.get(c.AUTHENTICATION.logout).pipe(h(1)).subscribe()}};r.\u0275fac=function(e){return new(e||r)(l(T),l(m))},r.\u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();export{d as a,c as b,T as c,U as d};
